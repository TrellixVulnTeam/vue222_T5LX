{"remainingRequest":"D:\\桌面\\vue2\\startApp\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\vue2\\startApp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\桌面\\vue2\\startApp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\vue2\\startApp\\src\\pages\\Login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\vue2\\startApp\\src\\pages\\Login\\Login.vue","mtime":1610883258406},{"path":"D:\\桌面\\vue2\\startApp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\vue2\\startApp\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面\\vue2\\startApp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\vue2\\startApp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovXHU2ODRDXHU5NzYyL3Z1ZTIvc3RhcnRBcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9cdTY4NENcdTk3NjIvdnVlMi9zdGFydEFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IExPR0lOIH0gZnJvbSAnQC9zdG9yZS9sb2dpbic7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2dpbk5hbWU6ICcnLAogICAgICBsb2dpblBhc3M6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFtMT0dJTl0pKSwge30sIHsKICAgIG9uTG9naW46IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9vbkxvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHZhbHVlcykgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdCcsIHZhbHVlcyk7CgogICAgICAgICAgICAgICAgaWYgKCEoIXZhbHVlcyB8fCB2YWx1ZXMuZXJyb3JzKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tMT0dJTl0oewogICAgICAgICAgICAgICAgICBsb2dpbk5hbWU6IHZhbHVlcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgbG9naW5QYXNzOiB2YWx1ZXMucGFzc3dvcmQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcygn55m75b2V5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsvLyAg6Lez6L2s5Li76aG1CiAgICAgICAgICAgICAgICAgICAgLy8gIHRoaXMuJHJvdXRlci5wdXNoKCkKICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdChfY29udGV4dC50MC5tZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMywgMTBdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIG9uTG9naW4oX3gpIHsKICAgICAgICByZXR1cm4gX29uTG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG9uTG9naW47CiAgICB9KCksCiAgICBvbkZhaWxlZDogZnVuY3Rpb24gb25GYWlsZWQoZXJyb3JJbmZvKSB7CiAgICAgIGNvbnNvbGUubG9nKCdmYWlsZWQnLCBlcnJvckluZm8pOwogICAgfQogIH0pCn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA,SAAA,KAAA,QAAA,eAAA;AACA,SAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAAA,kCACA,UAAA,CAAA,CAAA,KAAA,CAAA,CADA;AAEA,IAAA,OAAA;AAAA,6EAAA,iBAAA,MAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,MAAA;;AADA,sBAEA,CAAA,MAAA,IAAA,MAAA,CAAA,MAFA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,uBAIA,KAAA,KAAA,EAAA;AACA,kBAAA,SAAA,EAAA,MAAA,CAAA,QADA;AAEA,kBAAA,SAAA,EAAA,MAAA,CAAA;AAFA,iBAAA,CAJA;;AAAA;AAIA,gBAAA,MAJA;;AAQA,oBAAA,MAAA,CAAA,KAAA,EAAA;AACA,uBAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA,uBAAA,OAAA,GAAA,KAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,kBAAA,UAAA,CAAA,YAAA,CACA;AACA;AACA,mBAHA,EAGA,IAHA,CAAA;AAIA;;AAhBA;AAAA;;AAAA;AAAA;AAAA;AAkBA,qBAAA,OAAA,GAAA,KAAA;AACA,qBAAA,MAAA,CAAA,YAAA,OAAA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OAFA;AAwBA,IAAA,QAxBA,oBAwBA,SAxBA,EAwBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,SAAA;AACA;AA1BA;AAPA,CAAA","sourcesContent":["<style lang='scss' scoped>\r\n.login-page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: #35a9f7;\r\n\r\n  .header-top {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 5vh 0;\r\n    font-size: 10vw;\r\n\r\n    .header-text {\r\n      color: white;\r\n      font-weight: bold;\r\n      text-shadow: 1vw 1vw 4vw black;\r\n    }\r\n  }\r\n\r\n  .login-content {\r\n    display: flex;\r\n    flex: 1;\r\n    justify-content: center;\r\n    margin: 5vh 0;\r\n\r\n    .login-form {\r\n      width: 90%;\r\n\r\n      van-field {\r\n        height: 25px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"login-page\">\r\n    <div class=\"header-top\">\r\n      <p class=\"header-text\">TODO</p>\r\n    </div>\r\n    <div class=\"login-content\">\r\n      <van-form class=\"login-form\" @submit=\"onLogin\" @failed=\"onFailed\">\r\n        <van-field\r\n          v-model=\"loginName\"\r\n          name=\"username\"\r\n          label=\"用户名\"\r\n          :rules=\"[{ required: true, message: '请输入账户' }]\"\r\n          placeholder=\"请输入账户\"\r\n        />\r\n        <van-field\r\n          v-model=\"loginPass\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"密码\"\r\n          :rules=\"[{ required: true, message: '请输入密码' }]\"\r\n          placeholder=\"请输入密码\"\r\n        />\r\n        <div style=\"margin: 16px 0;\">\r\n          <van-button round block type=\"primary\" native-type=\"submit\">\r\n              提交\r\n          </van-button>\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { LOGIN } from '@/store/login'\r\nimport { mapActions } from 'vuex'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      loginName: '',\r\n      loginPass: ''\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([LOGIN]),\r\n    onLogin: async function (values) {\r\n      console.log('submit', values);\r\n      if (!values || values.errors) return;\r\n      try {\r\n        const result = await this[LOGIN]({\r\n          loginName: values.username,\r\n          loginPass: values.password\r\n        })\r\n        if (result.token) {\r\n          this.$toast.success('登录成功')\r\n          this.loading = false\r\n          console.log(result)\r\n          setTimeout(() => {\r\n            //  跳转主页\r\n            //  this.$router.push()\r\n          }, 1000)\r\n        }\r\n      } catch (err) {\r\n        this.loading = false\r\n        this.$toast(err.message)\r\n      }\r\n    },\r\n    onFailed(errorInfo) {\r\n      console.log('failed', errorInfo);\r\n    },\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/pages/Login"}]}